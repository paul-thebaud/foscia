"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6565],{9613:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>f});var i=n(9496);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=i.createContext({}),l=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=l(e.components);return i.createElement(s.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},m=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),p=l(n),m=a,f=p["".concat(s,".").concat(m)]||p[m]||d[m]||o;return n?i.createElement(f,r(r({ref:t},u),{},{components:n})):i.createElement(f,r({ref:t},u))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,r=new Array(o);r[0]=m;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c[p]="string"==typeof e?e:a,r[1]=c;for(var l=2;l<o;l++)r[l]=n[l];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}m.displayName="MDXCreateElement"},5044:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>d,frontMatter:()=>o,metadata:()=>c,toc:()=>l});var i=n(8028),a=(n(9496),n(9613));const o={sidebar_position:70,description:"Making your own action factory."},r="Creating an action factory",c={unversionedId:"guides/actions/custom-action-factory",id:"guides/actions/custom-action-factory",title:"Creating an action factory",description:"Making your own action factory.",source:"@site/docs/guides/actions/custom-action-factory.md",sourceDirName:"guides/actions",slug:"/guides/actions/custom-action-factory",permalink:"/foscia/docs/guides/actions/custom-action-factory",draft:!1,editUrl:"https://github.com/paul-thebaud/foscia/tree/main/website/docs/guides/actions/custom-action-factory.md",tags:[],version:"current",sidebarPosition:70,frontMatter:{sidebar_position:70,description:"Making your own action factory."},sidebar:"docsSidebar",previous:{title:"Creating an action runner",permalink:"/foscia/docs/guides/actions/custom-action-runners"},next:{title:"Configuring dependencies",permalink:"/foscia/docs/category/configuring-dependencies"}},s={},l=[{value:"Replacing some dependencies",id:"replacing-some-dependencies",level:2},{value:"Writing your own factory",id:"writing-your-own-factory",level:2}],u={toc:l},p="wrapper";function d(e){let{components:t,...n}=e;return(0,a.kt)(p,(0,i.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"creating-an-action-factory"},"Creating an action factory"),(0,a.kt)("admonition",{title:"What you'll learn",type:"tip"},(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},"Creating a custom action factory"))),(0,a.kt)("p",null,"As mentioned in the\n",(0,a.kt)("a",{parentName:"p",href:"/docs/guides/implementations/presentation"},"implementations guide presentation"),",\nany action will require some dedicated features through dependencies."),(0,a.kt)("p",null,"When using an action factory blueprint, all those dependencies are initialized\nautomatically, and you may only configure it. This is quick and simple, but do\nnot fit custom implementations or full tree-shaking needs."),(0,a.kt)("h2",{id:"replacing-some-dependencies"},"Replacing some dependencies"),(0,a.kt)("p",null,"Sometimes, you may need to only replace an overwritten dependency (such as a\ncustomized version of the ",(0,a.kt)("inlineCode",{parentName:"p"},"RestDeserializer"),"). Admitting you have an extended\nversion of this deserializer like:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript",metastring:'title="action/customDeserializer.js"',title:'"action/customDeserializer.js"'},"export default class CustomDeserializer extends RestDeserializer {\n    // ...your overwrite...\n}\n")),(0,a.kt)("p",null,"You are able to keep using the default blueprint factory and only replace some\ndependency by instantiating your action manually:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript",metastring:'title="action.js"',title:'"action.js"'},"import { makeJsonRest } from 'foscia/blueprints';\nimport { context } from 'foscia/core';\nimport CustomDeserializer from './action/customDeserializer';\n\n// Note that we are not using the exported action function,\n// but the raw Action class.\nconst { Action, cache, registry, adapter, serializer } = makeJsonRest({\n    baseURL: 'https://example.com/api/v1',\n});\n\nconst deserializer = new CustomDeserializer();\n\n// We are now manually declaring our action factory\n// with the proper dependencies injection.\nexport default function action() {\n    return new Action().use(\n        context({\n            cache,\n            registry,\n            adapter,\n            deserializer,\n            serializer,\n        }),\n    );\n}\n")),(0,a.kt)("h2",{id:"writing-your-own-factory"},"Writing your own factory"),(0,a.kt)("p",null,"For more complex requirements, like with custom implementations, you should use\na custom action factory from scratch."),(0,a.kt)("p",null,"When using a custom action factory, all those dependencies are initialized and\nattached to your actions manually. This gives you a lot of control over which\ndependencies are imported, instantiated and attached, thus reducing your\nproduction bundle if you are removing unused dependencies."),(0,a.kt)("p",null,"To write a custom action factory, you may inspire from Foscia official\nblueprints factories :"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/paul-thebaud/foscia/blob/main/src/blueprints/jsonapi/makeJsonApi.ts"},(0,a.kt)("inlineCode",{parentName:"a"},"makeJsonApi"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/paul-thebaud/foscia/blob/main/src/blueprints/rest/makeJsonRest.ts"},(0,a.kt)("inlineCode",{parentName:"a"},"makeJsonRest")))),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"When an action enhancer/runner requires a dependency, Foscia will throw an\nexception if this dependency is not available in the context. You may remove\nuseless dependencies which you are not using for now."),(0,a.kt)("p",{parentName:"admonition"},"But, be careful! Removing some dependencies may have an invisible impact! As an\nexample, absence of the cache may not throw an exception, but will allow\nmultiple instances of the same record to coexist.")))}d.isMDXComponent=!0}}]);