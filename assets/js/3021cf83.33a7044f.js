"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2538],{9613:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var a=n(9496);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=c(n),m=o,f=d["".concat(s,".").concat(m)]||d[m]||p[m]||r;return n?a.createElement(f,i(i({ref:t},u),{},{components:n})):a.createElement(f,i({ref:t},u))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var c=2;c<r;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},208:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(9496),o=n(5924);const r="tabItem_IPoj";function i(e){let{children:t,hidden:n,className:i}=e;return a.createElement("div",{role:"tabpanel",className:(0,o.Z)(r,i),hidden:n},t)}},4210:(e,t,n)=>{n.d(t,{Z:()=>m});var a=n(4250),o=n(9496),r=n(5924),i=n(4375),l=n(4436),s=n(7883),c=n(4930);const u="tabList_xr86",p="tabItem_r4_W";function d(e){var t;const{lazy:n,block:i,defaultValue:d,values:m,groupId:f,className:h}=e,y=o.Children.map(e.children,(e=>{if((0,o.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),g=m??y.map((e=>{let{props:{value:t,label:n,attributes:a}}=e;return{value:t,label:n,attributes:a}})),k=(0,l.l)(g,((e,t)=>e.value===t.value));if(k.length>0)throw new Error(`Docusaurus error: Duplicate values "${k.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const b=null===d?d:d??(null==(t=y.find((e=>e.props.default)))?void 0:t.props.value)??y[0].props.value;if(null!==b&&!g.some((e=>e.value===b)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${b}" but none of its children has the corresponding value. Available values are: ${g.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:v,setTabGroupChoices:w}=(0,s.U)(),[N,x]=(0,o.useState)(b),O=[],{blockElementScrollPositionUntilNextRender:P}=(0,c.o5)();if(null!=f){const e=v[f];null!=e&&e!==N&&g.some((t=>t.value===e))&&x(e)}const T=e=>{const t=e.currentTarget,n=O.indexOf(t),a=g[n].value;a!==N&&(P(t),x(a),null!=f&&w(f,String(a)))},I=e=>{var t;let n=null;switch(e.key){case"Enter":T(e);break;case"ArrowRight":{const t=O.indexOf(e.currentTarget)+1;n=O[t]??O[0];break}case"ArrowLeft":{const t=O.indexOf(e.currentTarget)-1;n=O[t]??O[O.length-1];break}}null==(t=n)||t.focus()};return o.createElement("div",{className:(0,r.Z)("tabs-container",u)},o.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":i},h)},g.map((e=>{let{value:t,label:n,attributes:i}=e;return o.createElement("li",(0,a.Z)({role:"tab",tabIndex:N===t?0:-1,"aria-selected":N===t,key:t,ref:e=>O.push(e),onKeyDown:I,onClick:T},i,{className:(0,r.Z)("tabs__item",p,null==i?void 0:i.className,{"tabs__item--active":N===t})}),n??t)}))),n?(0,o.cloneElement)(y.filter((e=>e.props.value===N))[0],{className:"margin-top--md"}):o.createElement("div",{className:"margin-top--md"},y.map(((e,t)=>(0,o.cloneElement)(e,{key:t,hidden:e.props.value!==N})))))}function m(e){const t=(0,i.Z)();return o.createElement(d,(0,a.Z)({key:String(t)},e))}},3025:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>s,default:()=>m,frontMatter:()=>l,metadata:()=>c,toc:()=>p});var a=n(4250),o=(n(9496),n(9613)),r=n(208),i=n(4210);const l={sidebar_position:3},s="Getting started",c={unversionedId:"getting-started",id:"getting-started",title:"Getting started",description:"- Creating your first model and using it through model instances",source:"@site/docs/getting-started.mdx",sourceDirName:".",slug:"/getting-started",permalink:"/func-client/docs/getting-started",draft:!1,editUrl:"https://github.com/paul-thebaud/func-client/tree/main/website/docs/getting-started.mdx",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Installation",permalink:"/func-client/docs/installation"},next:{title:"Essentials",permalink:"/func-client/docs/category/essentials"}},u={},p=[{value:"Your first model",id:"your-first-model",level:2},{value:"Defining a model",id:"defining-a-model",level:3},{value:"Using models classes",id:"using-models-classes",level:3},{value:"Your first actions",id:"your-first-actions",level:2},{value:"Action factory with blueprints",id:"action-factory-with-blueprints",level:3},{value:"Running actions",id:"running-actions",level:3}],d={toc:p};function m(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"getting-started"},"Getting started"),(0,o.kt)("admonition",{title:"What you'll learn",type:"tip"},(0,o.kt)("ul",{parentName:"admonition"},(0,o.kt)("li",{parentName:"ul"},"Creating your first model and using it through model instances"),(0,o.kt)("li",{parentName:"ul"},"Creating your action factory using blueprints for a JSON:API backend"),(0,o.kt)("li",{parentName:"ul"},"Running basic actions on your models with your action factory"))),(0,o.kt)("h2",{id:"your-first-model"},"Your first model"),(0,o.kt)("p",null,"Models represent the structure of your data and are used to simplify and\nstrongly type your backend interactions."),(0,o.kt)("h3",{id:"defining-a-model"},"Defining a model"),(0,o.kt)("p",null,"To declare a model, you just need to use the ",(0,o.kt)("inlineCode",{parentName:"p"},"makeModel")," function. This function takes 3 arguments:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"The model ",(0,o.kt)("inlineCode",{parentName:"li"},"type"),", which is used by other services to identify your model or interact with an API."),(0,o.kt)("li",{parentName:"ul"},"The model ",(0,o.kt)("inlineCode",{parentName:"li"},"definition"),", which contains your attributes/relations definitions and custom properties\nand methods.")),(0,o.kt)(i.Z,{groupId:"language",defaultValue:"ts",values:[{label:"TypeScript",value:"ts"},{label:"JavaScript",value:"js"}],mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"ts",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="models/post.ts"',title:'"models/post.ts"'},"import { makeModel, attr, hasMany, toDate } from 'func-client/core';\nimport type Comment from './comment';\n\nexport default class Post extends makeModel('posts', {\n  title: attr<string>(),\n  description: attr<string>(),\n  publishedAt: attr<Date | undefined>(toDate()),\n  comments: hasMany<Comment>(),\n  get isDraft() {\n    return !this.publishedAt;\n  },\n}) {\n}\n"))),(0,o.kt)(r.Z,{value:"js",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="models/post.ts"',title:'"models/post.ts"'},"import { makeModel, attr, hasMany, toDate } from 'func-client/core';\n\nexport default class Post extends makeModel('posts', {\n    title: attr(),\n    description: attr(),\n    publishedAt: attr(toDate()),\n    comments: hasMany(),\n    get isDraft() {\n        return !this.publishedAt;\n    },\n}) {\n}\n")))),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"If you never need to import only a model's type (such as in Typescript to avoid circular deps),\nyou can directly use the ",(0,o.kt)("inlineCode",{parentName:"p"},"makeModel")," returned value instead of extending it:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"export default makeModel('posts', /* your model definition... */);\n")),(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("a",{parentName:"p",href:"/docs/faq#why-classes-are-used-for-models-in-typescript"},(0,o.kt)("strong",{parentName:"a"},"Read the FAQ to understand the why.")))),(0,o.kt)("h3",{id:"using-models-classes"},"Using models classes"),(0,o.kt)("p",null,"Model classes can be used as any classical ES6 class. It can be instantiated,\nmanipulated, etc. Properties will be defined on each instance from the model\ndefinition."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"const post = new Post();\npost.title = 'Hello World!';\nconsole.log(post.title); // \"Hello World!\"\nconsole.log(post.isDraft); // true\nconsole.log(post.exists); // false\n")),(0,o.kt)("h2",{id:"your-first-actions"},"Your first actions"),(0,o.kt)("h3",{id:"action-factory-with-blueprints"},"Action factory with blueprints"),(0,o.kt)("p",null,"Once your models are set up, you will probably want to interact with a data store, such as an API.\nFor this, you will need an action factory which initialize a preconfigured context\nfor all your future action. Running actions using this action factory will be seen in the next part\nof this guide."),(0,o.kt)("p",null,"Blueprints provide a quick initialization of your action factory."),(0,o.kt)("p",null,"With the complete JSON:API action factory blueprint (named ",(0,o.kt)("inlineCode",{parentName:"p"},"makeJsonApi"),"), you can\nset up your action factory for a JSON:API by providing a root URL and the models it\ninteracts with."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript",metastring:'title="action.js"',title:'"action.js"'},"import { makeJsonApi } from 'func-client/blueprints';\n\nconst { makeAction, registry } = makeJsonApi({\n  baseURL: 'https://example.com/api/v1',\n});\n\n// We need to register the models to allow the deserializer to know\n// to which model it should deserialize a JSON:API record.\nregistry.register([Comment, Post, /* User, Tag */]);\n\nexport default function action() {\n  return makeAction();\n}\n")),(0,o.kt)("p",null,"In this example, ",(0,o.kt)("inlineCode",{parentName:"p"},"makeJsonApi")," will initialize all dependencies to read/write on a JSON:API.\nIt must only be called once, because instances may be cached after a read for example.\n",(0,o.kt)("inlineCode",{parentName:"p"},"makeAction")," is a default preconfigured action factory. It should be called on each new action\nyou are making, and not only once, because context enhancers are modifying the action context."),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"Using blueprints is a simple and quick way to set up an action factory. However, it has some downsides:"),(0,o.kt)("ul",{parentName:"admonition"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Only a JSON:API implementation of actions dependencies is available for now;")),(0,o.kt)("li",{parentName:"ul"},"You may not be able to configure all the behaviors you want;"),(0,o.kt)("li",{parentName:"ul"},"You may increase your bundle size by importing useless actions dependencies;")),(0,o.kt)("p",{parentName:"admonition"},"If you want more control over your action factory and dependencies, you should\nread ",(0,o.kt)("a",{parentName:"p",href:"#todo"},"the advanced guide on actions dependencies and factories (TODO)"),".")),(0,o.kt)("h3",{id:"running-actions"},"Running actions"),(0,o.kt)("p",null,"To run an action, you can initialize a new action instance by calling your factory.\nWith this instance, you can call ",(0,o.kt)("strong",{parentName:"p"},"context enhancers")," through ",(0,o.kt)("inlineCode",{parentName:"p"},"use")," to modify\nthe action context.\nWhen you are ready, you can ",(0,o.kt)("inlineCode",{parentName:"p"},"run")," the action with a given ",(0,o.kt)("strong",{parentName:"p"},"context runner"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import { all, model } from 'func-client/core';\nimport Post from './models/post';\nimport action from './action';\n\nconst posts = await action()\n  .use(model(Post))\n  .run(all());\n")),(0,o.kt)("p",null,"Generally in FuncClient, the context enhancers are doing the majority of work to\ncustomize the action you will run. Context runners only exists to tell how\nyou wish to run the action and retrieve the result (raw response,\nmodel instance, etc.)."),(0,o.kt)("p",null,"A great example of this is when finding a model using its ID. You'll not use\na ",(0,o.kt)("inlineCode",{parentName:"p"},"find")," context runner. Instead, you will need to use a ",(0,o.kt)("inlineCode",{parentName:"p"},"find")," context\nenhancer and a ",(0,o.kt)("inlineCode",{parentName:"p"},"oneOrFail")," context runner. This way, you are able to do\na find query and retrieve a raw result when needed."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import { find, oneOrFail } from 'func-client/core';\nimport Post from './models/post';\nimport action from './action';\n\nconst post = await action()\n  .use(find(Post, 'abc-123'))\n  .run(oneOrFail());\n")),(0,o.kt)("p",null,"This works the same to send write operations through actions. In the following\nexample, we are retrieving a raw adapter response instead of model instances."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import { create, one, fill } from 'func-client/core';\nimport Post from './models/post';\nimport action from './action';\n\nconst post = fill(new Post(), {\n  title: 'Hello World!',\n  description: 'Your first post',\n});\n\nconst response = await action()\n  .use(create(post))\n  .run(one());\n")),(0,o.kt)("p",null,"Finally, you may also want to use FuncClient to make non-standard API calls\nwhich are unrelated to models."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import { instance, knownData } from 'func-client/core';\nimport { makePost } from 'func-client/json-api';\nimport action from './action';\n\nconst post = await action()\n  .use(find(Post, 'abc-123'))\n  .run(oneOrFail());\n\n// Make a POST call to \"https://example.com/api/v1/services/posts/1/publish\"\n// Admitting it returns: {\"message\":\"Successfully published post.\"}\nconst data = await action()\n  .use(instance(post))\n  .use(makePost('publish'))\n  .run(knownData());\n\nconsole.log(data.message); // \"Successfully published post.\"\n")),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("inlineCode",{parentName:"p"},"data")," runner will return the adapter response data (for JSON:API, it is a JSON:API document)."),(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("inlineCode",{parentName:"p"},"knownData")," will the same data but with a generic type (which defaults to any). This can be useful\nwhen creating non-standard JSON:API services.")))}m.isMDXComponent=!0}}]);