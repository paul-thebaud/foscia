---
sidebar_position: 2
description: Available actions enhancers.
---

import Chip from '../../src/components/chip';
import FunctionInfo from '../../src/components/functionInfo';

# Actions enhancers

## Note

Many actions enhancers are available. Each may:

- <Chip>depend</Chip> on a minimal package version
- <Chip color="primary">only</Chip> be available in a given use case
(JSON:API, REST, HTTP, etc.)
- <Chip color="success">provide</Chip> a given context to next enhancers
or runners
- <Chip color="danger">require</Chip> a given context from previous enhancers
or runners

Examples of this guide will omit imports of your action factories or models to
provide shorter examples.

## Common

### `context`

Merge the given context into the action's current context.
**The context is not deeply merged.**

This is the most basic context enhancer. It is used by a lot of FuncClient
enhancers.

#### Example

```javascript
import { context } from 'func-client/core';

action().use(context({ /* additional context */ }));
```

#### Arguments

- `{{}}` `contextToMerge`
a context object to merge into the action's current context

### `target`

<FunctionInfo provides="Model" />

Only target the given model.

In most cases, you should use ([`model`](#model), [`find`](#find) or any other
model's enhancers instead of `target`.

#### Example

```javascript
import { target } from 'func-client/core';

action().use(target(Post));
```

#### Arguments

- [`{M extends Model}`](/docs/api/func-client/modules/core#model) `model` the model class to use

### `forModel`

<FunctionInfo provides="Model" />

Target the given model.

Use its type and other applicable model's context.

#### Example

```javascript
import { forModel } from 'func-client/core';

action().use(forModel(Post));
```

#### Arguments

- [`{M extends Model}`](/docs/api/func-client/modules/core#model) `model` the model class to use

### `forInstance`

<FunctionInfo provides="Model, Instance, ID" />

Target the given model.

Use its type and other applicable model's context.

#### Example

```javascript
import { forInstance } from 'func-client/core';

action().use(forInstance(post));
```

#### Arguments

- [`{I extends ModelInstance}`](/docs/api/func-client/modules/core#modelinstance) `instance` the instance to use

### `forRelation`

<FunctionInfo provides="Model, Instance, ID, Relation" />

Target the given instance's relation.

Use its type and other applicable model/relation context.

#### Example

```javascript
import { forRelation } from 'func-client/core';

action().use(forRelation(post, 'comments'));
```

#### Arguments

- [`{I extends ModelInstance}`](/docs/api/func-client/modules/core#modelinstance) `instance` the instance to use
- [`{ModelRelationKey<I>}`](/docs/api/func-client/modules/core#modelrelationkey) `relationKey` the relation to use

### `forId`

<FunctionInfo provides="ID" />

Target the given ID.

#### Example

```javascript
import { forId } from 'func-client/core';

action().use(forId('123'));
```

#### Arguments

- [`{ModelId | undefined}`](/docs/api/func-client/modules/core#modelid) `id` the ID to use

### `find`

<FunctionInfo provides="Model, ID" />

Target a given model record using its ID.

#### Example

```javascript
import { find } from 'func-client/core';

action().use(find(Post, '123'));
```

#### Arguments

- [`{M extends Model}`](/docs/api/func-client/modules/core#model) `model` the model class to use
- [`{ModelId}`](/docs/api/func-client/modules/core#modelid) `id` the ID to use

### `create`

<FunctionInfo
  requires="Serializer"
  provides="Model, Instance, ID"
/>

Prepare context for an instance creation.

#### Example

```javascript
import { create } from 'func-client/core';

const post = new Post();
action().use(create(post));
```

#### Arguments

- [`{I extends ModelInstance}`](/docs/api/func-client/modules/core#modelinstance)
`instance` an instance of model to create

### `update`

<FunctionInfo
  requires="Serializer"
  provides="Model, Instance, ID"
/>

Prepare context for an instance update.

#### Example

```javascript
import { update } from 'func-client/core';

action().use(update(post));
```

#### Arguments

- [`{I extends ModelInstance}`](/docs/api/func-client/modules/core#modelinstance)
`instance` an instance of model to update

### `save`

<FunctionInfo
  requires="Serializer"
  provides="Model, Instance, ID"
/>

Prepare context for an instance creation or update depending on its existence
state. Calls `update` if the instance exists, otherwise call `create`.

#### Example

```javascript
import { save } from 'func-client/core';

action().use(save(post));
```

#### Arguments

- [`{I extends ModelInstance}`](/docs/api/func-client/modules/core#modelinstance)
`instance` an instance of model to save

### `destroy`

<FunctionInfo provides="Model, Instance, ID" />

Prepare context for an instance deletion.

#### Example

```javascript
import { destroy } from 'func-client/core';

action().use(destroy(post));
```

#### Arguments

- [`{I extends ModelInstance}`](/docs/api/func-client/modules/core#modelinstance)
`instance` an instance of model to delete

### `instanceData`

<FunctionInfo requires="Serializer" />

Serialize the given instance as the context's data.

#### Example

```javascript
import { instanceData } from 'func-client/core';

action().use(instanceData(post));
```

#### Arguments

- [`{I extends ModelInstance}`](/docs/api/func-client/modules/core#modelinstance)
`instance` an instance of model to serialize

### `include`

<FunctionInfo requires="Model" />

Eager load the given relations for the current model definition. It accepts
deep relations through dot notation. The new relations will be merged with
the previous ones.

#### Example

```javascript
import { include } from 'func-client/core';

action().use(include('author'));
action().use(include('author', 'comments', 'comments.reactions'));
action().use(include(['author', 'comments', 'comments.reactions']));
```

#### Arguments

- [`{ArrayableVariadic<ModelRelationDotKey<M>>}`](/docs/api/func-client/modules/core#modelrelationdotkey)
`...relations` a relation or a set of relation to eager load

## HTTP

### `makeGet`

<FunctionInfo only="HTTP" />

HTTP GET method shortcut for the [`makeRequest` function](#makerequest).

#### Example

```javascript
import { makeGet } from 'func-client/http';

action().use(makeGet('https://example.com', { /* config */ }));
```

#### Arguments

- `{string}` `pathOrBaseURL` a path or base URL for the request
- [`{HttpRequestConfig | undefined}`](/docs/api/func-client/modules/http#httprequestconfig) `config`
a request configuration object

### `makePost`

<FunctionInfo only="HTTP" />

HTTP POST method shortcut for the [`makeRequest` function](#makerequest).

#### Example

```javascript
import { makePost } from 'func-client/http';

action().use(makePost('https://example.com', { data: 'foobar' }, { /* config */ }));
```

#### Arguments

- `{string}` `pathOrBaseURL` a path or base URL for the request
- [`{HttpRequestConfig['body'] | undefined}`](/docs/api/func-client/modules/http#httprequestconfig) `body`
a request body
- [`{HttpRequestConfig | undefined}`](/docs/api/func-client/modules/http#httprequestconfig) `config`
a request configuration object

### `makePut`

<FunctionInfo only="HTTP" />

HTTP PUT method shortcut for the [`makeRequest` function](#makerequest).

#### Example

```javascript
import { makePut } from 'func-client/http';

action().use(makePut('https://example.com', { data: 'foobar' }, { /* config */ }));
```

#### Arguments

- `{string}` `pathOrBaseURL` a path or base URL for the request
- [`{HttpRequestConfig['body'] | undefined}`](/docs/api/func-client/modules/http#httprequestconfig) `body`
a request body
- [`{HttpRequestConfig | undefined}`](/docs/api/func-client/modules/http#httprequestconfig) `config`
a request configuration object

### `makePatch`

<FunctionInfo only="HTTP" />

HTTP PATCH method shortcut for the [`makeRequest` function](#makerequest).

#### Example

```javascript
import { makePatch } from 'func-client/http';

action().use(makePatch('https://example.com', { data: 'foobar' }, { /* config */ }));
```

#### Arguments

- `{string}` `pathOrBaseURL` a path or base URL for the request
- [`{HttpRequestConfig['body'] | undefined}`](/docs/api/func-client/modules/http#httprequestconfig) `body`
a request body
- [`{HttpRequestConfig | undefined}`](/docs/api/func-client/modules/http#httprequestconfig) `config`
a request configuration object

### `makeDelete`

<FunctionInfo only="HTTP" />

HTTP DELETE method shortcut for the [`makeRequest` function](#makerequest).

#### Example

```javascript
import { makeDelete } from 'func-client/http';

action().use(makeDelete('https://example.com', { data: 'foobar' }, { /* config */ }));
```

#### Arguments

- `{string}` `pathOrBaseURL` a path or base URL for the request
- [`{HttpRequestConfig['body'] | undefined}`](/docs/api/func-client/modules/http#httprequestconfig) `body`
a request body
- [`{HttpRequestConfig | undefined}`](/docs/api/func-client/modules/http#httprequestconfig) `config`
a request configuration object

### `makeRequest`

<FunctionInfo only="HTTP" />

Prepare a generic HTTP request.
If given path starts with scheme (HTTPS, etc.), it will be used as the base
URL of action, otherwise it will only be used as path.

#### Example

```javascript
import { makeRequest } from 'func-client/http';

action().use(makeRequest('https://example.com', { /* config */ }));
```

#### Arguments

- `{string}` `pathOrBaseURL` a path or base URL for the request
- [`{HttpRequestConfig | undefined}`](/docs/api/func-client/modules/http#httprequestconfig) `config`
a request configuration object

### `param`

<FunctionInfo only="HTTP" />

Set the given query param on the request.
The new params will be merged with the previous ones.

#### Example

```javascript
import { param } from 'func-client/http';

action().use(param('foo', 'foo'));   // Key and value.
action().use(param({ bar: 'bar' })); // Object.
```

#### Arguments

- `{string | Dictionary}` `key` a key for the param or a params object
- `{unknown | undefined}` `value` a value for the param

### `abortSignal`

<FunctionInfo only="HTTP" />

Configure an abort signal on the request to
[make it abortable](https://developer.chrome.com/blog/abortable-fetch/).

#### Example

```javascript
import { abortSignal } from 'func-client/http';

const abortController = new AbortController();

action().use(abortSignal(abortController));
```

#### Arguments

- `{Optional<AbortController | AbortSignal>}` `controllerOrSignal` an abort
controller or signal instance to configure (or undefined/null to cancel a
previous configuration)

## JSON:API

### `fields`

<FunctionInfo
  only="JSON:API"
  requires="Model"
/>

[Select the given JSON:API fieldsets](https://jsonapi.org/format/#fetching-sparse-fieldsets)
for the current context's model. The new fieldsets will be merged with the
previous ones.

#### Example

```javascript
import { fields } from 'func-client/jsonapi';

action().use(fields('title'));
action().use(fields('title', 'description'));
action().use(fields(['title', 'description']));
```

#### Arguments

- [`{ArrayableVariadic<ModelKey<M>>}`](/docs/api/func-client/modules/core#modelkey) `...fieldset` a
field or a set of field to select for the current context's model

### `fieldsFor`

<FunctionInfo only="JSON:API" />

[Select the given JSON:API fieldsets](https://jsonapi.org/format/#fetching-sparse-fieldsets)
for the given model. The new fieldsets will be merged with the
previous ones.

#### Example

```javascript
import { fieldsFor } from 'func-client/jsonapi';


action().use(fieldsFor(Post, 'title'));
action().use(fieldsFor(Post, 'title', 'description'));
action().use(fieldsFor(Post, ['title', 'description']));
```

#### Arguments

- [`{M extends ModelClass<D>}`](/docs/api/func-client/modules/core#modelclass) `model` the model
to select the fieldsets for
- [`{ArrayableVariadic<ModelKey<M>>}`](/docs/api/func-client/modules/core#modelkey) `...fieldset` a
field or a set of field to select for the given model

### `filterBy`

<FunctionInfo only="JSON:API" />

[Filter the JSON:API resource](https://jsonapi.org/format/#fetching-filtering)
by the given key and value.
When key is an object, it will spread the object as a filter values map.
The new filter will be merged with the previous ones.

#### Example

```javascript
import { filterBy } from 'func-client/jsonapi';


action().use(filterBy('isPublished', true));
```

#### Arguments

- `{string | Dictionary}` `key` a key for the filter or a filter object
- `{unknown | undefined}` `value` a value for the filter

### `sortBy`

<FunctionInfo only="JSON:API" />

[Sort the JSON:API resource](https://jsonapi.org/format/#fetching-sorting)
by the given key and direction. The new sort will be merged with the
previous ones. **Sorts priority are kept**.

#### Example

```javascript
import { sortBy } from 'func-client/jsonapi';

action().use(sortBy('createdAt'));
```

#### Arguments

- `{string | string[]}` `key` the key(s) for the sort
- `{'asc' | 'desc' = 'asc'}` `direction` the direction for the sort

### `sortByDesc`

<FunctionInfo only="JSON:API" />

Shortcut for the [`sortBy` function](#sortby) with a `desc` direction.

#### Example

```javascript
import { sortByDesc } from 'func-client/jsonapi';

action().use(sortByDesc('createdAt'));
```

#### Arguments

- `{string | string[]}` `key` the key(s) for the sort

### `paginate`

<FunctionInfo only="JSON:API" />

[Paginate the JSON:API resource](https://jsonapi.org/format/#fetching-pagination)
by the given params.
JSON:API specification on pagination is agnostic, so page params may be
anything used by your implementation.

#### Example

```javascript
import { paginate } from 'func-client/jsonapi';


action().use(paginate({ number: 1, size: 10 }));
```

#### Arguments

- `{unknown}` `page` a pagination value which match your implementation

## Hooks

### `onPreparing`

Register a `preparing` hook callback on action.
Callback may be async.

#### Example

```javascript
import { onPreparing } from 'func-client/jsonapi';


action().use(onPreparing(() => {
  /* Do something */
}));
```

#### Arguments

- `{() => Awaitable<void>}` `callback` callback to run on event

### `onRunning`

Register a `running` hook callback on action.
Callback may be async.

#### Example

```javascript
import { onRunning } from 'func-client/jsonapi';


action().use(onRunning((event) => {
  /* Do something */
}));
```

#### Arguments

- `{(event: { context: {}; result: unknown }) => Awaitable<void>}` `callback` callback to run on event

### `onSuccess`

Register a `success` hook callback on action.
Callback may be async.

#### Example

```javascript
import { onSuccess } from 'func-client/jsonapi';


action().use(onSuccess((event) => {
  /* Do something */
}));
```

#### Arguments

- `{(event: { context: {} }) => Awaitable<void>}` `callback` callback to run on event

### `onError`

Register a `error` hook callback on action.
Callback may be async.

#### Example

```javascript
import { onError } from 'func-client/jsonapi';


action().use(onError((event) => {
  /* Do something */
}));
```

#### Arguments

- `{(event: { context: {}; error: unknown }) => Awaitable<void>}` `callback` callback to run on event

### `onFinally`

Register a `finally` hook callback on action.
Callback may be async.

#### Example

```javascript
import { onFinally } from 'func-client/jsonapi';


action().use(onFinally((event) => {
  /* Do something */
}));
```

#### Arguments

- `{(event: { context: {} }) => Awaitable<void>}` `callback` callback to run on event
